{% extends "layout.html" %}

{% block left %}
<div class="well">
<script type="text/x-handlebars">{% raw %}
    <form class="form-vertical">
        <div class="input-append">
            {{view Redbeard.SearchTextField placeholder="Filter by name" valueBinding="Redbeard.keysController.query" classNames="search-query"}}
            <button type="button" {{action "loadKeys" target="Redbeard.keysController"}} class="btn">Go!</button>
        </div>
        {{view Redbeard.FilterSelectField prompt="Filter by type" classNames="typeFilter" selectionBinding="Redbeard.keysController.type_filter"}}
    </form>

    <div id="keyslist">
        <ul class="nav nav-list list">
            <li class="nav-header">Keys</li>
            {{#each Redbeard.keysController}}
                {{#view Redbeard.keyView contentBinding="this"}}
                    {{#with content}}
                    <li {{bindAttr class="type"}}><a href="#" {{action "addKey" target="Redbeard.keyDetailController"}}>{{id}}</a></li>
                    {{/with}}
                {{/view}}
            {{/each}}
        </ul>
    </div>
{% endraw %}</script>
</div>
{% endblock %}

{% block right %}
<script type="text/x-handlebars">{% raw %}
{{#each Redbeard.keyDetailController}}
    {{#view Redbeard.keyDetailView contentBinding="this"}}
        {{#with content}}
        <div class="page-header">
            <h1>{{id}}</h1>
        </div>
        <table class="table table-bordered key-table">
            <tbody>
                <tr>
                    <th>Type</th>
                    <td>{{type}}</td>
                </tr>
                <tr>
                    <th>Value</th>
                    <td>{{{value}}}</td>
                </tr>
            </tbody>
        </table>
        {{/with}}
    {{/view}}
{{/each}}
{% endraw %}</script>
{% endblock %}

{% block extra_scripts %}
{% endblock %}